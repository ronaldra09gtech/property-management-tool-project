import{c as h,s as u,b as C,e as v,R as f,j as e}from"./index-Balmp9Wm.js";import{u as y,a as g}from"./useMutation-Dpa1Kpty.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=h("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=h("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);async function T(){const{data:s,error:a}=await u.from("theme_settings").select("*").single();if(a)throw a;return{id:s.id,companyName:s.company_name,appName:s.app_name,logoUrl:s.logo_url,primaryColor:s.primary_color,secondaryColor:s.secondary_color,textColor:s.text_color,backgroundColor:s.background_color,componentBackground:s.component_background,accentColor:s.accent_color}}async function P(s){const{data:a,error:n}=await u.from("theme_settings").update({company_name:s.companyName,app_name:s.appName,logo_url:s.logoUrl,primary_color:s.primaryColor,secondary_color:s.secondaryColor,text_color:s.textColor,background_color:s.backgroundColor,component_background:s.componentBackground,accent_color:s.accentColor}).eq("id",s.id).select().single();if(n)throw n;return{id:a.id,companyName:a.company_name,appName:a.app_name,logoUrl:a.logo_url,primaryColor:a.primary_color,secondaryColor:a.secondary_color,textColor:a.text_color,backgroundColor:a.background_color,componentBackground:a.component_background,accentColor:a.accent_color}}async function F(){const{data:s,error:a}=await u.from("email_settings").select("*").single();if(a)throw a;return{id:s.id,smtpHost:s.smtp_host,smtpPort:s.smtp_port,smtpUser:s.smtp_user,smtpPassword:s.smtp_password,smtpSecure:s.smtp_secure,fromEmail:s.from_email,fromName:s.from_name,notificationTypes:s.notification_types}}async function U(s){const{data:a,error:n}=await u.from("email_settings").update({smtp_host:s.smtpHost,smtp_port:s.smtpPort,smtp_user:s.smtpUser,smtp_password:s.smtpPassword,smtp_secure:s.smtpSecure,from_email:s.fromEmail,from_name:s.fromName,notification_types:s.notificationTypes}).eq("id",s.id).select().single();if(n)throw n;return{id:a.id,smtpHost:a.smtp_host,smtpPort:a.smtp_port,smtpUser:a.smtp_user,smtpPassword:a.smtp_password,smtpSecure:a.smtp_secure,fromEmail:a.from_email,fromName:a.from_name,notificationTypes:a.notification_types}}function B(){const s=C(),{settings:a,setSettings:n}=v(),[m,i]=f.useState(!1),p=f.useRef(null),{data:o}=y({queryKey:["themeSettings"],queryFn:T,onSuccess:l=>{n(l)}}),{data:r}=y({queryKey:["emailSettings"],queryFn:F}),x=g({mutationFn:P,onSuccess:l=>{n(l),s.invalidateQueries({queryKey:["themeSettings"]})}}),N=g({mutationFn:U,onSuccess:()=>{s.invalidateQueries({queryKey:["emailSettings"]})}}),j=async l=>{if(l.preventDefault(),!(o!=null&&o.id))return;i(!0);const c=l.target,t=new FormData(c);try{await x.mutateAsync({id:o.id,appName:t.get("appName"),companyName:t.get("companyName"),primaryColor:t.get("primaryColor"),secondaryColor:t.get("secondaryColor"),textColor:t.get("textColor"),backgroundColor:t.get("backgroundColor"),componentBackground:t.get("componentBackground"),accentColor:t.get("accentColor")})}catch(d){console.error("Error saving theme settings:",d)}finally{i(!1)}},w=async l=>{if(l.preventDefault(),!(r!=null&&r.id))return;i(!0);const c=l.target,t=new FormData(c);try{await N.mutateAsync({id:r.id,smtpHost:t.get("smtpHost"),smtpPort:parseInt(t.get("smtpPort")),smtpUser:t.get("smtpUser"),smtpPassword:t.get("smtpPassword"),smtpSecure:t.get("smtpSecure")==="true",fromEmail:t.get("fromEmail"),fromName:t.get("fromName"),notificationTypes:Array.from(t.getAll("notificationTypes"))})}catch(d){console.error("Error saving email settings:",d)}finally{i(!1)}},k=async l=>{var t;const c=(t=l.target.files)==null?void 0:t[0];if(!(!c||!(o!=null&&o.id)))try{await x.mutateAsync({id:o.id,logoUrl:URL.createObjectURL(c)})}catch(d){console.error("Error uploading logo:",d)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Settings"})}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg",children:e.jsxs("form",{onSubmit:j,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Theme Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"appName",className:"block text-sm font-medium text-gray-700",children:"App Name"}),e.jsx("input",{type:"text",name:"appName",id:"appName",defaultValue:o==null?void 0:o.appName,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700",children:"Company Name"}),e.jsx("input",{type:"text",name:"companyName",id:"companyName",defaultValue:o==null?void 0:o.companyName,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Logo"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-4",children:[(o==null?void 0:o.logoUrl)&&e.jsx("img",{src:o.logoUrl,alt:"Company Logo",className:"h-12 w-12 object-contain"}),e.jsxs("button",{type:"button",onClick:()=>{var l;return(l=p.current)==null?void 0:l.click()},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),e.jsx("input",{ref:p,type:"file",accept:"image/*",className:"hidden",onChange:k})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"primaryColor",className:"block text-sm font-medium text-gray-700",children:"Primary Color"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx("input",{type:"color",name:"primaryColor",id:"primaryColor",defaultValue:o==null?void 0:o.primaryColor,className:"h-8 w-8 rounded-md border border-gray-300"}),e.jsx("input",{type:"text",defaultValue:o==null?void 0:o.primaryColor,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",readOnly:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"secondaryColor",className:"block text-sm font-medium text-gray-700",children:"Secondary Color"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx("input",{type:"color",name:"secondaryColor",id:"secondaryColor",defaultValue:o==null?void 0:o.secondaryColor,className:"h-8 w-8 rounded-md border border-gray-300"}),e.jsx("input",{type:"text",defaultValue:o==null?void 0:o.secondaryColor,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",readOnly:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"textColor",className:"block text-sm font-medium text-gray-700",children:"Text Color"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx("input",{type:"color",name:"textColor",id:"textColor",defaultValue:o==null?void 0:o.textColor,className:"h-8 w-8 rounded-md border border-gray-300"}),e.jsx("input",{type:"text",defaultValue:o==null?void 0:o.textColor,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",readOnly:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"backgroundColor",className:"block text-sm font-medium text-gray-700",children:"Background Color"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx("input",{type:"color",name:"backgroundColor",id:"backgroundColor",defaultValue:o==null?void 0:o.backgroundColor,className:"h-8 w-8 rounded-md border border-gray-300"}),e.jsx("input",{type:"text",defaultValue:o==null?void 0:o.backgroundColor,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",readOnly:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"componentBackground",className:"block text-sm font-medium text-gray-700",children:"Component Background"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx("input",{type:"color",name:"componentBackground",id:"componentBackground",defaultValue:o==null?void 0:o.componentBackground,className:"h-8 w-8 rounded-md border border-gray-300"}),e.jsx("input",{type:"text",defaultValue:o==null?void 0:o.componentBackground,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",readOnly:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accentColor",className:"block text-sm font-medium text-gray-700",children:"Accent Color"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx("input",{type:"color",name:"accentColor",id:"accentColor",defaultValue:o==null?void 0:o.accentColor,className:"h-8 w-8 rounded-md border border-gray-300"}),e.jsx("input",{type:"text",defaultValue:o==null?void 0:o.accentColor,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",readOnly:!0})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{type:"submit",disabled:m,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),m?"Saving...":"Save Theme Settings"]})})]})]})}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg",children:e.jsxs("form",{onSubmit:w,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Email Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtpHost",className:"block text-sm font-medium text-gray-700",children:"SMTP Host"}),e.jsx("input",{type:"text",name:"smtpHost",id:"smtpHost",defaultValue:r==null?void 0:r.smtpHost,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtpPort",className:"block text-sm font-medium text-gray-700",children:"SMTP Port"}),e.jsx("input",{type:"number",name:"smtpPort",id:"smtpPort",defaultValue:r==null?void 0:r.smtpPort,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtpUser",className:"block text-sm font-medium text-gray-700",children:"SMTP Username"}),e.jsx("input",{type:"text",name:"smtpUser",id:"smtpUser",defaultValue:r==null?void 0:r.smtpUser,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtpPassword",className:"block text-sm font-medium text-gray-700",children:"SMTP Password"}),e.jsx("input",{type:"password",name:"smtpPassword",id:"smtpPassword",defaultValue:r==null?void 0:r.smtpPassword,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fromEmail",className:"block text-sm font-medium text-gray-700",children:"From Email"}),e.jsx("input",{type:"email",name:"fromEmail",id:"fromEmail",defaultValue:r==null?void 0:r.fromEmail,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fromName",className:"block text-sm font-medium text-gray-700",children:"From Name"}),e.jsx("input",{type:"text",name:"fromName",id:"fromName",defaultValue:r==null?void 0:r.fromName,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SMTP Security"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"smtpSecure",value:"true",defaultChecked:r==null?void 0:r.smtpSecure,className:"form-radio h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2",children:"SSL/TLS"})]}),e.jsxs("label",{className:"inline-flex items-center ml-6",children:[e.jsx("input",{type:"radio",name:"smtpSecure",value:"false",defaultChecked:!(r!=null&&r.smtpSecure),className:"form-radio h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2",children:"None"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notification Types"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",name:"notificationTypes",value:"maintenance",defaultChecked:r==null?void 0:r.notificationTypes.includes("maintenance"),className:"form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2",children:"Maintenance Requests"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",name:"notificationTypes",value:"payments",defaultChecked:r==null?void 0:r.notificationTypes.includes("payments"),className:"form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2",children:"Payments"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",name:"notificationTypes",value:"contracts",defaultChecked:r==null?void 0:r.notificationTypes.includes("contracts"),className:"form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2",children:"Contracts"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",name:"notificationTypes",value:"bookings",defaultChecked:r==null?void 0:r.notificationTypes.includes("bookings"),className:"form-checkbox h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2",children:"Bookings"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{type:"submit",disabled:m,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),m?"Saving...":"Save Email Settings"]})})]})]})})]})}export{B as default};
